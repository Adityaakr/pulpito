{% extends "layout.html" %}

{% block body %}

      <div class="row">
          <div class="col-lg-12">
            <div class="page-header">
              <h1 id="tables">{{ run['name'] }} Results</h1>
              <h2>
                {% if run['results']['fail'] %}
                  {{ run['results']['fail'] }} failed,
                {% endif %}
                {% if run['results']['running'] %}
                  {{ run['results']['running'] }} running,
                {% endif %}
                {% if run['results']['pass'] %}
                  {{ run['results']['pass'] }} passed
                {% endif %}
                ({{ run['results']['total'] }} total)
              </h2>
              {% if run.branch and run.suite %}
                <h2>
                  <a href="/compare?branch={{ run.branch }}&suite={{ run.suite }}" target="_blank">
                      See other runs of suite '{{ run.suite }}' on branch '{{ run.branch }}'?
                  </a>
                </h2>
              {% endif %}
              {% if run.scheduled %}
                <h2>
                  <a href="/date/{{ run.scheduled_day }}/" target="_blank">
                    See other runs scheduled on {{ run.scheduled_day }}?
                  </a>
                </h2>
              {% endif %}
            </div>

            <div class="bs-example">
              <table class="table table-condensed table-striped table-bordered table-hover link-bare" style="border-collapse:collapse;">
                <thead>
                  <tr>
                    <th>Job ID</th>
                    <th>Status</th>
                    <th>Duration</th>
                    <th>Machine</th>
                    <th>Teuthology Branch</th>
                    <th>OS Type</th>
                  </tr>
                </thead>
                <tbody>
                  {% for job in run['jobs'] %}
                    <tr class="{{ job['status_class'] }}" data-toggle="collapse" class="accordion-toggle" data-target="#{{ job.job_id }}">
                      <td>
                        <a href="/{{ run['name']}}/{{ job['job_id'] }}" target="_blank">
                          {{ job['job_id'] }}
                        </a>
                      </td>
                      <td>
                          {{ job['status'] }}
                      </td>
                      <td>
                          {{ job['duration'] }}
                      </td>
                      <td>
                          {{ job['machine_type'] }}
                      </td>
                      <td>
                          {{ job['teuthology_branch'] }}
                      </td>
                      <td>
                          {{ job['os_type'] }}
                      </td>
                    </tr>
                    <tr class="expand-child">
                      <td colspan="6" class="hiddenRow"><div class="accordian-body collapse" id="{{ job.job_id }}">
                        Failure Reason:
                        <p class="code-text">
                            {{ job['failure_reason'] }}
                        </p>
                      </div></td>
                    </tr>

                  {% endfor %}
                </tbody>
              </table>
            </div><!-- /example -->
          </div>
        </div>
{% endblock %}


