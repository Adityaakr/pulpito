{% extends "layout.html" %}

{% block body %}
      <div class="row">
          <div class="col-lg-12">
            <div class="page-header">
                <h1 id="tables">Latest {{ runs|length }} test runs
                    {{ 'of suite ' + suite if suite|length else '' }}
                    {{ 'on branch ' + branch if branch|length else '' }}
                    {{ 'from ' + dates[0] if dates[0] else '' }}
                    {{ 'to ' + dates[1] if dates[1] else '' }}
                </h1>
              <h2>
                Job stats:
                {{ runs|map(attribute='results')|sum(attribute='fail') }} failed,
                {{ runs|map(attribute='results')|sum(attribute='running') }} running,
                {{ runs|map(attribute='results')|sum(attribute='pass') }} passed
                ({{ runs|map(attribute='results')|sum(attribute='total') }} total)
              </h2>
            </div>

            <div class="bs-example">
              <table class="table table-striped table-bordered table-hover link-bare">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Pass</th>
                    <th>Fail</th>
                    <th>Running</th>
                  </tr>
                </thead>
                <tbody>
                  {% for run in runs %}
                    <tr class="{{ run['status_class'] }}">
                      <td>
                        <a href="/{{ run['name'] }}">
                          {{ run['name'] }}
                        </a>
                      </td>
                      <td>{{ run['results']['pass'] }}</td>
                      <td>{{ run['results']['fail'] }}</td>
                      <td>{{ run['results']['running'] }}</td>
                    </tr>
                  {% endfor %}
               </tbody>
              </table>
            </div><!-- /example -->
          </div>
        </div>
{% endblock %}

